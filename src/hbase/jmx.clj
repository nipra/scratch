(ns hbase.jmx
  (:require [clojure.java.jmx :as jmx])
  (:require [clojure [string :as s] [pprint :as p]]))

;;; Source: http://briancarper.net/blog/527/printing-a-nicely-formatted-plaintext-table-of-data-in-clojure
(defn table
  "Given a seq of hash-maps, prints a plaintext table of the values of the hash-maps.
  If passed a list of keys, displays only those keys.  Otherwise displays all the
  keys in the first hash-map in the seq."
  ([xs]
     (table xs (keys (first xs))))
  ([xs ks]
     (when (seq xs)
       (let [f (fn [old-widths x]
                 (reduce (fn [new-widths k]
                           (let [length (inc (count (str (k x))))]
                             (if (> length (k new-widths 0))
                               (assoc new-widths k length)
                               new-widths)))
                         old-widths ks))
             widths (reduce f {} (conj xs (zipmap ks ks)))
             total-width (reduce + (vals widths))
             format-string (str "蝈漉沐（篝ケē鏖漪梵⒘塍%")]
         (p/cl-format true format-string (map str ks))
         (p/cl-format true "窿ア蝈疱狒麸翎飙鏖漪墉┅ㄤ矬羼埒筝鸠沆骘蝽狒趄蹂骘蝽狒篝蜷铉磲塍┅┅┅ㄤ彐摞轰钺黹趄蹂桠狍瀛磲篝弪㈣徜镲瓠桧狍翦虬伯箪篌ㄤ彐摞轰钺黹趄蹂桠狍瀛磲篝弪觏痫螋卑卑暴ㄤ彐摞轰钺黹趄蹂桠狍瀛蝈玳镱箦蝣弪觏痫螋卑卑博ㄤ彐蝈玳镱箦蝣弪蟓礤趄殂酆狒镯殂深泸屙孱粼轫辶鲧蚤礤横麸黹闵钽蝈礤铘蚤礤歪蚤礤横麸黹闵钽蝈礤铘蚤礤烷钤轫横麸黹闵钽蝈礤铘蚤礤熙硐痼衡祜汶冕汨迕秕铘衡祜汶冕汨迮鲩泗邃蔑躅衡祜汶冕汨迤蝈衡祜汶冕汨迦轸冕汨轭缫狒轱衡祜汶冕汨迦轸冕汨轭缫狒轱嗅篝涡弪轱潴衡祜汶冕汨迦轸蔑躅衡祜汶冕汨迦轸裔糸衡祜汶冕汨迦轸裔糸镄狍粑绣蜷镤衡祜汶冕汨逋轶竺秕铘衡祜汶冕汨逵辁恒桢汶篚砥衢祯蝈竺秕铘恒镯疳泗轱钛蹂蹂娱恒镯疳泗轱钣辁辶鲧蚤礤恒镯疳泗轱钣辁逋狲蚤礤恒镯疳泗轱钣辁逋轭蚤礤恒镯疳泗轱钣辁逦蹴橡恒镯疳泗轱钤轫辶鲧蚤礤恒镯疳泗轱钤轫逋狲蚤礤恒镯疳泗轱钤轫逋轭蚤礤恒镯疳泗轱钤轫逦蹴橡烘祯箬氧艴逵辁烘祯箬娱辶鲧蚤礤烘祯箬娱逋狲蚤礤烘祯箬娱逋轭蚤礤烘祯箬娱逦蹴橡烘祯箬蚤礤瘤缭轫烘祯箬蚤礤歪蚤礤烘祯箬蚤礤烷钤轫烘祯箬蚤礤熙硐痼烘笮蝈徜提翦钽瘤缭轫烘笮蝈徜提翦钽乳篝镧蜥磉返翳唣弪沐铘殪烘笮蝈徜提翦钽乳篝镧蜥磉沟翳唣弪沐铘殪烘笮蝈徜提翦钽乳篝镧蜥磉构翳唣弪沐铘殪烘笮蝈徜提翦钽乳篝镧蜥磉磲烘笮蝈徜提翦钽乳篝镧蜥磉礤犷烘笮蝈徜提翦钽乳篝镧蜥磉礤溟犷烘笮蝈徜提翦钽乳篝镧蜥磉黹烘笮蝈徜提翦钽乳篝镧蜥磉铛磉镳烘笮蝈徜提翦钽乳篝镧蜥磉篝溥溴烘笮蝈徜提翦钽歪蚤礤烘笮蝈徜提翦钽烷钤轫烘笮蝈徜提翦钽熙硐痼烘笠遽涮狒孱泫瘤缭轫烘笠遽涮狒孱泫乳篝镧蜥磉返翳唣弪沐铘殪烘笠遽涮狒孱泫乳篝镧蜥磉沟翳唣弪沐铘殪烘笠遽涮狒孱泫乳篝镧蜥磉构翳唣弪沐铘殪烘笠遽涮狒孱泫乳篝镧蜥磉磲烘笠遽涮狒孱泫乳篝镧蜥磉礤犷烘笠遽涮狒孱泫乳篝镧蜥磉礤溟犷烘笠遽涮狒孱泫乳篝镧蜥磉黹烘笠遽涮狒孱泫乳篝镧蜥磉铛磉镳烘笠遽涮狒孱泫乳篝镧蜥磉篝溥溴烘笠遽涮狒孱泫歪蚤礤烘笠遽涮狒孱泫烷钤轫烘笠遽涮狒孱泫熙硐痼烘笥钽提翦钽瘤缭轫烘笥钽提翦钽歪蚤礤烘笥钽提翦钽烷钤轫烘笥钽提翦钽熙硐痼烘笞蜷翦提翦钽瘤缭轫烘笞蜷翦提翦钽乳篝镧蜥磉返翳唣弪沐铘殪烘笞蜷翦提翦钽乳篝镧蜥磉沟翳唣弪沐铘殪烘笞蜷翦提翦钽乳篝镧蜥磉构翳唣弪沐铘殪烘笞蜷翦提翦钽乳篝镧蜥磉磲烘笞蜷翦提翦钽乳篝镧蜥磉礤犷烘笞蜷翦提翦钽乳篝镧蜥磉礤溟犷烘笞蜷翦提翦钽乳篝镧蜥磉黹烘笞蜷翦提翦钽乳篝镧蜥磉铛磉镳烘笞蜷翦提翦钽乳篝镧蜥磉篝溥溴烘笞蜷翦提翦钽歪蚤礤烘笞蜷翦提翦钽烷钤轫烘笞蜷翦提翦钽熙硐痼烘笞蜷翦娱辶鲧蚤礤烘笞蜷翦娱逋狲蚤礤烘笞蜷翦娱逋轭蚤礤烘笞蜷翦娱逦蹴橡鸿滏舐祜汶筇镢犰轸深溴喉馍钔屙矧组翳秕糇撂喉屙篝矧逵辁逋侯蹴絮趔组翳秕糇撂候遽湟羼蹂篝竺秕铘候彗轱钣痨轸漆殪躜迕秕铘候彗轱钣痨轸吁沣弩竺秕铘候彗轱铙候羼蹂篝候镲羯钿屮娱逅后祜魅田缌痧孱涿秕铘后祜魅田缌痧孱湓轫辶鲧蚤礤后祜魅田缌痧孱湓轫逋狲蚤礤后祜魅田缌痧孱湓轫逋轭蚤礤后祜魅田缌痧孱湓轫逦蹴橡后麸蝈骈戾深溴娱逋后麸蝈骈戾后麸蝈呼雉犰郁狒殂蚂镲碛辁逅呼雉犰郁狒殂深溴娱逅乎痄狒弩蚂镢脲溆邈镱潴乳玷揍翦蜻返翳唣弪沐铘殪乎痄狒弩蚂镢脲溆邈镱潴乳玷揍翦蜻沟翳唣弪沐铘殪乎痄狒弩蚂镢脲溆邈镱潴乳玷揍翦蜻构翳唣弪沐铘殪乎痄狒弩蚂镢脲溆邈镱潴乳玷揍翦蜻磲乎痄狒弩蚂镢脲溆邈镱潴乳玷揍翦蜻礤犷乎痄狒弩蚂镢脲溆邈镱潴乳玷揍翦蜻礤溟犷乎痄狒弩蚂镢脲溆邈镱潴乳玷揍翦蜻黹乎痄狒弩蚂镢脲溆邈镱潴乳玷揍翦蜻铛磉镳乎痄狒弩蚂镢脲溆邈镱潴乳玷揍翦蜻篝溥溴乎痄狒弩蚂镢脲溆邈镱潴叻掉柽疱蜚孱糸戾乎痄狒弩蚂镢脲溆邈镱潴吖掉柽疱蜚孱糸戾乎痄狒弩蚂镢脲溆邈镱潴吖刽柽疱蜚孱糸戾乎痄狒弩蚂镢脲溆邈镱潴唔狲乎痄狒弩蚂镢脲溆邈镱潴唔遽乎痄狒弩蚂镢脲溆邈镱潴唔邃獒乎痄狒弩蚂镢脲溆邈镱潴唔轭乎痄狒弩蚂镢脲溆邈镱潴哳蹴唢痼乎痄狒弩蚂镢脲溆邈镱潴唧翡咪弼瑚蜷翦义聃弩趔蔑躅糨ㄤ彐珏舡蝈玳镱箦蝣弪圯觏鏖翳泔铑邈糸镱鸿矬桠狍瀛磲篝弪吼矧桠狍瀛磲篝弪觏痫螋戾垓彗轱铙弪鲥蝮脲ê义玳镱渝蝣弪觏礅遽㈣徜镲鸷箦蝣殂褰歪篝弪钺礤酵狍翦颌┅┹磲（钺礤蟑箴扉＂骈蝮舂蝈玳镱箦蝣弪螬┅ㄤ彐珏舡蝈玳镱箦蝣弪礤趄殂螵垓彗轱铙弪鲥礤趄殂筝觏鏖翳泔铑邈糸镱鸿矬蝈玳镱箦蝣弪吼矧桠狍瀛蝈玳镱箦蝣弪觏痫螋礤趄殂觏礅遽㈣徜镲鸷箦蝣殂褰义玳镱渝蝣弪钺礤揭彗轱钣弪鲥蛴翎糸篝殂螈┅┅ㄤ彐珏舡蝈玳镱箦蝣弪礤趄殂垌弭蜷泱戾垓彗轱铙弪鲥蝮ㄧ弭蝈玳镱箦蝣弪螬礤趄殂螵磲（蝈漉沐ㄦ埒礤蜱ㄧ弭蝈玳镱箦蝣弪礤趄殂螵┅礤趄殂螬蝈玳镱箦蝣弪螬礤趄殂螵磲ㄦ埒礤蜱鸿矬┅蝈玳镱箦蝣弪礤趄殂螵┹箫螋怡鸿矬礤趄殂螵┅ㄤ彐忪镢氕祜汜扉豉轭溴ㄛㄧ弭蝈玳镱箦蝣弪礤趄殂鸿滏舐祜汶筇镢犰轸深溴┅ㄛ蝈玳镱箦蝣弪ㄧ弭蝈玳镱箦蝣弪礤趄殂蝈玳镱箦蝣弪鸿滏舐祜汶筇镢犰轸深溴┅ㄤ彐磲篌徵弪坭狍璀磲骈屐骢钶躔溽翦轭栳箬磲坻殄熹骢瞟ㄤ彐黹祆轱埒篝ㄦ祜狒ǒ卑鞍卑鞍┅眍┅ㄤ彐礅埒篝ㄦ祜狒ǒ卑泊卑泊┅吐┅ㄤ彐翳秕筢钿埒篝ㄦ祜狒ǒ卑鞍┅刷┅换阵徵ㄣ镯礤铘鸠痧蜷铘ㄧ弭蝈玳镱箦蝣弪礤趄殂酆桎骟蚂镢塍田汜扉豉深溴荸鸠痧蜷铘ㄧ弭蝈玳镱箦蝣弪礤趄殂酆篝矧弩后麸蝈骈戾筝┅鸠痧蜷铘ㄧ弭蝈玳镱箦蝣弪礤趄殂酆忪镢朊徙桢乳粢狒轱衡祜汶冕汨迦轸蔑躅衡祜汶冕汨逋轶竺秕铘荸翎忪ㄧ弭蝈玳镱箦蝣弪礤趄殂酆忪镢朊徙桢乳粢狒轱衡祜汶冕汨迦轸蔑躅衡祜汶冕汨逋轶竺秕铘荸酆栾篝衡祜汶冕汨迦轸裔糸衡祜汶冕汨迦轸蔑躅衡祜汶冕汨逋轶竺秕铘荸鸠痱轭舡翎忪酆栾篝衡祜汶冕汨迦轸裔糸衡祜汶冕汨迦轸蔑躅衡祜汶冕汨逋轶竺秕铘ㄧ弭蝈玳镱箦蝣弪礤趄殂酆忪镢朊徙桢乳粢狒轱衡祜汶冕汨迦轸蔑躅衡祜汶冕汨逋轶竺秕铘荸鸠痧蜷铘ㄧ弭蝈玳镱箦蝣弪礤趄殂酆泔眇徙糸镱蚤礤瘤缭轫遢┅鸠痧蜷铘ㄧ弭蝈玳镱箦蝣弪礤趄殂酆骒躞柩蹂蹂娱遢┅鸠痧蜷铘ㄧ弭蝈玳镱箦蝣弪礤趄殂酆忪镢朊徙桢娱遢┅鸠痧蜷铘ㄧ弭蝈玳镱箦蝣弪礤趄殂酆忪镢朊徙桢蔑躅糨┅鸠痧蜷铘ㄧ弭蝈玳镱箦蝣弪礤趄殂酆忪镢朊徙桢碰殂翦涿秕铘衡祜汶冕汨迕秕铘荸┅ㄣ镯礤铘ㄢ轭溟铉坭忉箦磲篝弪㈧镢犰栾篝⑤ㄧ弭蝈玳镱箦蝣弪螬┅ㄣ镯礤铘觏鏖翳泔铑邈糸镱鸿矬㈧镢犰栾篝吼矧嘲鞍觏礅遽㈥狯岙灬铉呼疱酵屙矧┅觏狒趄殁豸瀛钺礤㈥狯岙灬铉呼疱酵屙矧觏礅遽瞽钺礤邯┅换卑卑骄歪篝弪换卑卑骄义玳镱箦蝣弪ㄣ镯礤铘觏鏖翳泔铑邈糸镱鸿矬㈧镢犰栾篝吼矧卑卑饼觏礅遽㈥狯岙灬铉呼疱酵屙矧┅觏鏖翳泔铑邈糸镱鸿矬㈧镢犰栾篝吼矧卑卑饼箦觏礅遽瞽钺礤邯┅觏鏖翳泔铑邈糸镱鸿矬㈧镢犰栾篝吼矧卑卑饼换提蜱鲠祯觏礅遽㈣徜镲鸷箦蝣殂褰歪篝弪钺礤酵狍翦颌┅觏鏖翳泔铑邈糸镱鸿矬㈧镢犰栾篝吼矧卑卑饼脲觏礅遽㈣徜镲鸷箦蝣殂褰歪篝弪钺礤酵狍翦颌┅觏鏖翳泔铑邈糸镱鸿矬㈧镢犰栾篝吼矧卑卑饼ㄤ彐蝮ê义玳镱渝蝣弪觏礅遽㈣徜镲鸷箦蝣殂褰歪篝弪钺礤酵狍翦颌┅┅觏鏖翳泔铑邈糸镱鸿矬㈧镢犰栾篝吼矧卑卑饼觏礅遽㈣徜镲鸷箦蝣殂褰歪篝弪钺礤酵狍翦蛴翎糸篝殂螈┅ㄣ镯礤铘觏鏖翳泔铑邈糸镱鸿矬㈧镢犰栾篝吼矧卑卑昌觏礅遽㈥狯岙灬铉呼疱酵屙矧┅觏鏖翳泔铑邈糸镱鸿矬㈧镢犰栾篝吼矧卑卑昌箦觏礅遽瞽钺礤邯┅觏鏖翳泔铑邈糸镱鸿矬㈧镢犰栾篝吼矧卑卑昌觏礅遽㈣徜镲鸷箦蝣殂褰义玳镱渝蝣弪钺礤揭彗轱钣弪鲥颌┅觏鏖翳泔铑邈糸镱鸿矬㈧镢犰栾篝吼矧卑卑昌觏礅遽㈣徜镲鸷箦蝣殂褰义玳镱渝蝣弪钺礤揭彗轱钣弪鲥蛴翎糸篝殂螈┅